<div class="container d-flex flex-wrap justify-content-center">

  <div class="listing-card-container flex-grow-1 mr-3">
    <div class="listing-card" id="listing-details">
      <% @listing.photos.each do |photo| %>
        <%= image_tag photo %>
      <% end %>
      <div class="text-center m-3">
        <h1><%= @listing.title %></h1>
        <h5><%= @listing.description %></h5>
        <h2 class="card-trip-pricing"><%= "$#{@listing.fee} per hour" %></h2>
      </div>
    </div>
  </div>

  <% if @listing.user_id == current_user.id %>
    <div class="upcoming-bookings-container flex-grow-1 ml-3">
      <h2>Upcoming Bookings</h2>
      <ul class="d-flex flex-wrap">
        <% @listing.bookings.each do |booking| %>
          <li class="card m-2">
            <p>Starts on: <%= booking.start_at %></p>
            <p>Ends on: <%= booking.end_at %></p>
            <%= render partial: "bookings/status", locals: {booking: booking} %>
          </li>
        <% end %>
      </ul>
    </div>
  <% else %>
    <div class="container listing-bordered-container d-flex justify-content-center align-items-center flex-grow-1 ml-3">
      <div id="listing-form" class="mt-2">
        <%= simple_form_for [@listing, @booking] do |f| %>
          <%= f.input :start_at, html5: true %>
          <%= f.input :end_at, html5: true %>
          <%= f.input :notes %>
          <div class="text-center">
            <%= f.submit class: "btn btn-primary mb-3" %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

</div>

  <div class="d-flex justify-content-center align-items-center">
    <%= link_to "Back to Listings", root_path, class: 'btn btn-outline-secondary mb-3' %>
  </div>
</div>
<%# <div> %>
    <%# @listing.bookings.each do |booking|%>
    <%#= booking.id %>
    <%# end %>
<%# </div> %>

<% if false %>
  <%= render "map" %>
<% end %>
